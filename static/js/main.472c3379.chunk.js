(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1303:function(e,t,n){},1337:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(34),c=n.n(o),i=(n(689),n(690),n(1358)),l=n(1357),s=n(1359),u=n(1363),m=n(1349),f=n(1350),d=n(1351),g=n(1352),h=n(290),p=n(291),v=function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,null,[{key:"getFileTypes",value:function(){return[{id:"jpg",name:"jpg"},{id:"png",name:"png"},{id:"gif",name:"gif"},{id:"zip",name:"zip"},{id:"text",name:"text"},{id:"doc",name:"doc"},{id:"docx",name:"docx"},{id:"pdf",name:"pdf"},{id:"mp4",name:"mp4"}]}},{key:"convertDate",value:function(e){var t=new Date(1e3*e),n=t.getFullYear(),r=t.getMonth()+1;r<10&&(r="0"+r);var a=t.getDate();return a<10&&(a="0"+a),a+"-"+r+"-"+n}},{key:"toSizeString",value:function(e){return e<Math.pow(2,10)?e+" B":e<Math.pow(2,20)?(e/Math.pow(2,10)).toFixed(0)+" kB":e<Math.pow(2,30)?(e/Math.pow(2,20)).toFixed(2)+" MB":e<Math.pow(2,40)?(e/Math.pow(2,30)).toFixed(2)+" GB":void 0}},{key:"desc",value:function(e,t,n){var r=e[n],a=t[n],o=n.split(".");return 2===o.length&&(r=e[o[0]][o[1]],a=t[o[0]][o[1]]),a<r?-1:a>r?1:0}},{key:"stableSort",value:function(e,t){var n=e.map(function(e,t){return[e,t]});return n.sort(function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]}),n.map(function(e){return e[0]})}},{key:"getSorting",value:function(e,t){var n=this;return"DESC"===e?function(e,r){return n.desc(e,r,t)}:function(e,r){return-n.desc(e,r,t)}}}]),e}(),E=function(e){return a.a.createElement(s.a,Object.assign({},e,{bulkActionButtons:!1}),a.a.createElement(u.a,{rowClick:"edit"},a.a.createElement(m.a,{label:"File",source:"profile.image_original",title:"avatar",target:"_blank"}),a.a.createElement(f.a,{source:"id",label:"Id"}),a.a.createElement(d.a,{source:"profile.image_72",label:"Avatar"}),a.a.createElement(f.a,{source:"name",label:"user"}),a.a.createElement(f.a,{source:"profile.display_name",label:"Display name"}),a.a.createElement(f.a,{source:"profile.phone",label:"Phone"}),a.a.createElement(g.a,{source:"is_admin",render:function(e){return e.is_admin?"Admin":"Member"},label:"Role"}),a.a.createElement(g.a,{source:"deleted",render:function(e){return e.deleted?"Deleted":""},label:"Deleted"})))},b=function(e){return a.a.createElement(s.a,Object.assign({},e,{bulkActionButtons:!1}),a.a.createElement(u.a,{rowClick:"edit"},a.a.createElement(f.a,{source:"name",label:"Name"}),a.a.createElement(g.a,{source:"created",label:"Created",render:function(e){return v.convertDate(e.created)}})))},y=function(e){return a.a.createElement(s.a,Object.assign({},e,{bulkActionButtons:!1}),a.a.createElement(u.a,{rowClick:"edit"},a.a.createElement(f.a,{source:"name",label:"Name"}),a.a.createElement(g.a,{source:"created",label:"Created",render:function(e){return v.convertDate(e.created)}})))},w=n(104),S=n(1353),k=n(1367),O=n(1361),_=n(652),I=n(1354),j=n(1355),x=n(651),P=n(1364),A=n(1368),N=n(51),J=n.n(N),C=n(107),B=n.n(C),D=n(120),M=n.n(D),F=n(299),L=n(1362),z=function(e){return a.a.createElement(s.a,Object.assign({filters:a.a.createElement(V,null),actions:a.a.createElement(T,null)},e,{bulkActionButtons:a.a.createElement(U,null)}),a.a.createElement(w.a,{small:a.a.createElement(S.a,{primaryText:function(e){return e.title},secondaryText:function(e){return e.m_users},tertiaryText:function(e){return new Date(e.created).toLocaleDateString()}}),medium:a.a.createElement(G,null,a.a.createElement(m.a,{label:"File",source:"url_private",src:"url_private",title:"title",target:"_blank"}),a.a.createElement(f.a,{label:"User",source:"m_users"}),a.a.createElement(I.a,{label:"Channel",source:"m_channels",sortable:!1},a.a.createElement(k.a,null,a.a.createElement(j.a,{source:"name"}))),a.a.createElement(d.a,{label:"Thumbnail",source:"thumb_80",sortable:!1}),a.a.createElement(g.a,{source:"size",render:function(e){return v.toSizeString(e.size)}}),a.a.createElement(g.a,{source:"created",label:"Created",render:function(e){return v.convertDate(e.created)}}))}))},T=function(e){var t=e.bulkActions,n=e.basePath,r=e.currentSort,o=e.displayedFilters,c=e.exporter,i=e.filters,l=e.filterValues,s=e.onUnselectItems,u=e.resource,m=e.selectedIds,f=e.showFilter,d=e.total;return a.a.createElement(F.a,null,t&&a.a.cloneElement(t,{basePath:n,filterValues:l,resource:u,selectedIds:m,onUnselectItems:s}),i&&a.a.cloneElement(i,{resource:u,showFilter:f,displayedFilters:o,filterValues:l,context:"button"}),a.a.createElement(L.a,{disabled:0===d,resource:u,sort:r,filter:l,exporter:c}))},U=function(e){return a.a.createElement(r.Fragment,null,a.a.createElement(x.a,e))},V=function(e){return a.a.createElement(O.a,e,a.a.createElement(P.a,{label:"Search",source:"name",alwaysOn:!0}),a.a.createElement(A.a,{source:"user",choices:JSON.parse(sessionStorage.getItem("users")),allowEmpty:!0}),a.a.createElement(A.a,{source:"channels",choices:JSON.parse(sessionStorage.getItem("channels")),allowEmpty:!0}),a.a.createElement(A.a,{source:"filetype",choices:v.getFileTypes(),allowEmpty:!0}))},W=function(e){var t=e.record,n=e.resource,r=e.id,o=e.onToggleItem,c=e.children,i=e.selected,l=e.basePath;return a.a.createElement(B.a,{key:r},a.a.createElement(J.a,{padding:"none"},t.user===JSON.parse(localStorage.getItem("auth")).user_id&&a.a.createElement(M.a,{checked:i,onClick:function(){return o(r)}})),a.a.Children.map(c,function(e){return a.a.createElement(J.a,{key:"".concat(r,"-").concat(e.props.source)},a.a.cloneElement(e,{record:t,basePath:l,resource:n}))}))},H=function(e){return a.a.createElement(_.a,Object.assign({},e,{row:a.a.createElement(W,null)}))},G=function(e){return a.a.createElement(u.a,Object.assign({},e,{body:a.a.createElement(H,null)}))},R=n(326),Y=n.n(R),$=n(650),q=n.n($),K=n(193),Q=n.n(K),X=n(302),Z=n.n(X),ee=n(625),te=n.n(ee),ne=function(){return a.a.createElement(Q.a,null,a.a.createElement(te.a,{title:"Welcome to the administration"}),a.a.createElement(Z.a,null,"Lorem ipsum sic dolor amet..."))},re=n(313),ae=function(e,t){if(e===re.d){var n=t.username;return localStorage.setItem("username",n),Promise.resolve()}if(e===re.e)return localStorage.clear(),sessionStorage.clear(),Promise.resolve();if(e===re.b){var r=t.status;return 401===r||403===r?(localStorage.removeItem("username"),Promise.reject()):Promise.resolve()}return e===re.a?localStorage.getItem("auth")?Promise.resolve():Promise.reject():Promise.reject("Unknown method")},oe=n(26),ce=n(212),ie="https://slack.com/api",le=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")).access_token:"",se=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).user:"",ue="m_",me=function(e,t,n){var r;if(le)switch(console.group("============== dataProvider ============="),console.log(e),console.log(t),console.log(n),console.groupEnd(),e){case oe.d:switch(t){case"files":if(window.demo)return fe(n,window.demo);if(sessionStorage.getItem("files")){var a=JSON.parse(sessionStorage.getItem("files"));return fe(n,a)}return Promise.all([ve(),be()]).then(function(e){var t,r,a=e[0],o=e[1];return(t=a,r=o,new Promise(function(e,n){var a="";se.is_admin||se.is_dev||(a="&user=".concat(se.id)),Object(ce.get)("".concat(ie,"/files.list?token=").concat(le).concat(a,"&count=100&page=1")).then(function(n){var o=[];if(n.files.map(function(e){if(se.is_dev||e.channels)e[ue+"users"]=ye(r,e),e[ue+"channels"]=we(t,e),o.push(e);else{var n=!1;e.channels.map(function(e){for(var r=0;r<t.length;r++)if(t[r].id===e){n=!0;break}}),n&&(e[ue+"users"]=ye(r,e),e[ue+"channels"]=we(t,e),o.push(e))}}),n.paging.pages>1){for(var c=[],i=2;i<=n.paging.pages;i++)c.push("".concat(ie,"/files.list?token=").concat(le).concat(a,"&count=100&page=").concat(i));Promise.all(c.map(function(e){return Object(ce.get)(e).then(function(e){return e})})).then(function(n){n.map(function(e){e.files.map(function(e){var n=!1;se.is_dev?(e[ue+"users"]=ye(r,e),e[ue+"channels"]=we(t,e),o.push(e)):(e.channels.map(function(e){for(var r=0;r<t.length;r++)if(t[r].id===e){n=!0;break}}),n&&(e[ue+"users"]=ye(r,e),e[ue+"channels"]=we(t,e),o.push(e)))})}),sessionStorage.setItem("files",JSON.stringify(o)),e(o)})}else sessionStorage.setItem("files",JSON.stringify(o)),e(o)})})).then(function(e){return fe(n,e)})});case"users":return be().then(function(e){return fe(n,e)});case"channels":return ve().then(function(e){return fe(n,e)});case"groups":return new Promise(function(e,t){var n="";se.is_dev&&(n="&exclude_archived=true"),Object(ce.get)("".concat(ie,"/groups.list?token=").concat(le).concat(n)).then(function(t){sessionStorage.setItem("groups",JSON.stringify(t.groups)),e(t.groups)})}).then(function(e){return fe(n,e)})}break;case oe.c:r=n.ids,new Promise(function(e,t){for(var n=r,a=function(e){fetch("".concat(ie,"/files.delete?token=").concat(le,"&file=").concat(r[e]),{method:"post"}).then(function(t){n=r.filter(function(t){return t!==r[e]})})},o=0;o<r.length;o++)a(o);var c=JSON.parse(sessionStorage.getItem("files")).filter(function(e){return!n.includes(e.id)});sessionStorage.setItem("files",JSON.stringify(c)),window.demo=c});default:return}},fe=function(e,t){t=t.filter(function(t){return function(e,t){for(var n=Object.keys(t),r=0,a=n;r<a.length;r++){var o=a[r];if(Array.isArray(t[o])){var c=!1,i=!0,l=!1,s=void 0;try{for(var u,m=t[o][Symbol.iterator]();!(i=(u=m.next()).done);i=!0){var f=u.value;if(Array.isArray(e[o])){if(ge(f,e[o])){c=!0;break}}else if(e[o]===f){c=!0;break}}}catch(d){l=!0,s=d}finally{try{i||null==m.return||m.return()}finally{if(l)throw s}}if(!c)return!1}else if(Array.isArray(e[o])){if(!ge(t[o],e[o]))return!1}else if(e[o]!==t[o]&&!he(t[o],e[o]))return!1}return!0}(t,e.filter)}),Array.isArray(t)&&t.length>0&&t[0]&&t[0].hasOwnProperty("filetype")&&(document.getElementById("react-admin-title")?document.getElementById("react-admin-title").childNodes[0].innerHTML=v.toSizeString(de(t)):document.addEventListener("DOMContentLoaded",function(){document.getElementById("react-admin-title").childNodes[0].innerHTML=v.toSizeString(de(t))}));var n=v.stableSort(t,v.getSorting(e.sort.order,e.sort.field)),r=e.pagination,a=r.page,o=r.perPage;return{data:pe(a,o,n),total:n.length}};function de(e){var t=0,n=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){t+=o.value.size}}catch(i){r=!0,a=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return t}function ge(e,t){var n=!0,r=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){if(e===o.value)return!0}}catch(i){r=!0,a=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return!1}function he(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())}var pe=function(e,t,n){var r=(e-=1)*t,a=r+t;return n.slice(r,a)};function ve(){return new Promise(function(e,t){Object(ce.get)("".concat(ie,"/channels.list?token=").concat(le,"&count=1000")).then(function(t){var n=Ee(t.channels);sessionStorage.setItem("channels",JSON.stringify(Ee(n))),e(n)})})}function Ee(e){return se.is_dev?e:e.filter(function(e){return!e.is_archived&&e.members.includes(se.id)})}function be(){return new Promise(function(e,t){Object(ce.get)("".concat(ie,"/users.list?token=").concat(le,"&count=1000")).then(function(t){sessionStorage.setItem("users",JSON.stringify(t.members)),e(t.members)})})}function ye(e,t){for(var n=0;n<e.length;n++)if(t.user===e[n].id)return e[n].name;return"no name"}function we(e,t){for(var n=t.channels.filter(function(e,n){return t.channels.indexOf(e)==n}),r=[],a=0;a<n.length;a++)for(var o=function(o){n[a]===e[o].id&&(r.find(function(t){return t.id===e[o].id})&&console.error(t),r.push({id:e[o].id,name:e[o].name}))},c=0;c<e.length;c++)o(c);return r}var Se=n(654),ke=n(626),Oe=n(655),_e=n(13),Ie=n(627),je=(n(1303),{position:"absolute",left:"calc(50% - 172px/2)",top:"calc(50% - 43px/2)"}),xe=function(e){function t(){var e,n;Object(h.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(Se.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(a)))).submit=function(e){e.preventDefault();n.props.userLogin({})},n}return Object(Oe.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("a",{style:je,href:"https://slack.com/oauth/authorize? scope=files%3Awrite%3Auser+users%3Aread+files%3Aread+search%3Aread+channels%3Aread+groups%3Aread &client_id=231613720450.347038352342"},a.a.createElement("img",{alt:"Sign in with Slack",height:"40",width:"172",src:"https://platform.slack-edge.com/img/sign_in_with_slack.png",srcSet:"https://platform.slack-edge.com/img/sign_in_with_slack.png 1x, https://platform.slack-edge.com/img/sign_in_with_slack@2x.png 2x"}))}}]),t}(r.Component),Pe=Object(_e.connect)(void 0,{userLogin:Ie.userLogin})(xe),Ae=n(1360),Ne=n(656),Je=n(653),Ce=n(48),Be=n.n(Ce),De=n(11),Me=n(633),Fe=n(320),Le=n(158),ze=n.n(Le),Te=n(635),Ue=n.n(Te),Ve=Object(De.withStyles)({avatar:{height:30,width:30}})(function(e){var t=e.classes;return a.a.createElement("div",null,a.a.createElement(ze.a,{id:"avatar",className:t.avatar,src:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).user.profile.image_32:""}))}),We=function(e){return a.a.createElement(Me.a,Object.assign({},e,{icon:a.a.createElement(Ve,null)}),a.a.createElement(Fe.a,{to:"/configuration",primaryText:"Configuration",leftIcon:a.a.createElement(Ue.a,null)}))},He=Object(De.withStyles)({title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},spacer:{flex:1}})(function(e){var t=e.classes,n=Object(Ne.a)(e,["classes"]);return a.a.createElement(Je.a,Object.assign({},n,{userMenu:a.a.createElement(We,null)}),a.a.createElement(Be.a,{variant:"title",color:"inherit",className:t.title,id:"react-admin-title"}),a.a.createElement("span",{id:"react-admin-header",className:t.spacer},localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).user.profile.display_name:""))}),Ge=function(e){return a.a.createElement(Ae.a,Object.assign({},e,{appBar:He}))},Re=function(){return a.a.createElement(i.a,{appLayout:Ge,loginPage:Pe,dashboard:ne,authProvider:ae,dataProvider:me},a.a.createElement(l.a,{name:"files",list:z,icon:q.a}),a.a.createElement(l.a,{name:"users",list:E,icon:Y.a}),a.a.createElement(l.a,{name:"channels",list:b,icon:Y.a}),a.a.createElement(l.a,{name:"groups",list:y,icon:Y.a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},684:function(e,t,n){e.exports=n(1337)},689:function(e,t,n){},690:function(e,t,n){}},[[684,1,2]]]);
//# sourceMappingURL=main.472c3379.chunk.js.map