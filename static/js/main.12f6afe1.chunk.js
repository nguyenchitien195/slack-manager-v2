(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1303:function(e,t,n){},1337:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(34),i=n.n(o),c=(n(689),n(690),n(1358)),l=n(1357),s=n(1359),u=n(1363),m=n(1349),f=n(1350),d=n(1351),g=n(1352),h=n(290),p=n(291),v=function(){function e(){Object(h.a)(this,e)}return Object(p.a)(e,null,[{key:"getFileTypes",value:function(){return[{id:"jpg",name:"jpg"},{id:"png",name:"png"},{id:"gif",name:"gif"},{id:"zip",name:"zip"},{id:"text",name:"text"},{id:"doc",name:"doc"},{id:"docx",name:"docx"},{id:"pdf",name:"pdf"},{id:"mp4",name:"mp4"}]}},{key:"convertDate",value:function(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1;a<10&&(a="0"+a);var r=t.getDate();return r<10&&(r="0"+r),r+"-"+a+"-"+n}},{key:"toSizeString",value:function(e){return e<Math.pow(2,10)?e+" B":e<Math.pow(2,20)?(e/Math.pow(2,10)).toFixed(0)+" kB":e<Math.pow(2,30)?(e/Math.pow(2,20)).toFixed(2)+" MB":e<Math.pow(2,40)?(e/Math.pow(2,30)).toFixed(2)+" GB":void 0}},{key:"desc",value:function(e,t,n){var a=e[n],r=t[n],o=n.split(".");return 2===o.length&&(a=e[o[0]][o[1]],r=t[o[0]][o[1]]),r<a?-1:r>a?1:0}},{key:"stableSort",value:function(e,t){var n=e.map(function(e,t){return[e,t]});return n.sort(function(e,n){var a=t(e[0],n[0]);return 0!==a?a:e[1]-n[1]}),n.map(function(e){return e[0]})}},{key:"getSorting",value:function(e,t){var n=this;return"DESC"===e?function(e,a){return n.desc(e,a,t)}:function(e,a){return-n.desc(e,a,t)}}}]),e}(),E=function(e){return r.a.createElement(s.a,Object.assign({},e,{bulkActionButtons:!1}),r.a.createElement(u.a,{rowClick:"edit"},r.a.createElement(m.a,{label:"File",source:"profile.image_original",title:"avatar",target:"_blank"}),r.a.createElement(f.a,{source:"id",label:"Id"}),r.a.createElement(d.a,{source:"profile.image_72",label:"Avatar"}),r.a.createElement(f.a,{source:"name",label:"user"}),r.a.createElement(f.a,{source:"profile.display_name",label:"Display name"}),r.a.createElement(f.a,{source:"profile.phone",label:"Phone"}),r.a.createElement(g.a,{source:"is_admin",render:function(e){return e.is_admin?"Admin":"Member"},label:"Role"}),r.a.createElement(g.a,{source:"deleted",render:function(e){return e.deleted?"Deleted":""},label:"Deleted"})))},b=function(e){return r.a.createElement(s.a,Object.assign({},e,{bulkActionButtons:!1}),r.a.createElement(u.a,{rowClick:"edit"},r.a.createElement(f.a,{source:"name",label:"Name"}),r.a.createElement(g.a,{source:"created",label:"Created",render:function(e){return v.convertDate(e.created)}})))},y=function(e){return r.a.createElement(s.a,Object.assign({},e,{bulkActionButtons:!1}),r.a.createElement(u.a,{rowClick:"edit"},r.a.createElement(f.a,{source:"name",label:"Name"}),r.a.createElement(g.a,{source:"created",label:"Created",render:function(e){return v.convertDate(e.created)}})))},w=n(104),S=n(1353),k=n(1367),O=n(1361),_=n(652),I=n(1354),j=n(1355),x=n(651),P=n(1364),A=n(1368),N=n(51),J=n.n(N),C=n(107),D=n.n(C),B=n(120),F=n.n(B),M=n(299),L=n(1362),z=function(e){return r.a.createElement(s.a,Object.assign({filters:r.a.createElement(V,null),actions:r.a.createElement(T,null)},e,{bulkActionButtons:r.a.createElement(U,null)}),r.a.createElement(w.a,{small:r.a.createElement(S.a,{primaryText:function(e){return e.title},secondaryText:function(e){return e.m_users},tertiaryText:function(e){return new Date(e.created).toLocaleDateString()}}),medium:r.a.createElement(H,null,r.a.createElement(m.a,{label:"File",source:"url_private",src:"url_private",title:"title",target:"_blank"}),r.a.createElement(f.a,{label:"User",source:"m_users"}),r.a.createElement(I.a,{label:"Channel",source:"m_channels",sortable:!1},r.a.createElement(k.a,null,r.a.createElement(j.a,{source:"name"}))),r.a.createElement(d.a,{label:"Thumbnail",source:"thumb_80",sortable:!1}),r.a.createElement(g.a,{source:"size",render:function(e){return v.toSizeString(e.size)}}),r.a.createElement(g.a,{source:"created",label:"Created",render:function(e){return v.convertDate(e.created)}}))}))},T=function(e){var t=e.bulkActions,n=e.basePath,a=e.currentSort,o=e.displayedFilters,i=e.exporter,c=e.filters,l=e.filterValues,s=e.onUnselectItems,u=e.resource,m=e.selectedIds,f=e.showFilter,d=e.total;return r.a.createElement(M.a,null,t&&r.a.cloneElement(t,{basePath:n,filterValues:l,resource:u,selectedIds:m,onUnselectItems:s}),c&&r.a.cloneElement(c,{resource:u,showFilter:f,displayedFilters:o,filterValues:l,context:"button"}),r.a.createElement(L.a,{disabled:0===d,resource:u,sort:a,filter:l,exporter:i}))},U=function(e){return r.a.createElement(a.Fragment,null,r.a.createElement(x.a,e))},V=function(e){return r.a.createElement(O.a,e,r.a.createElement(P.a,{label:"Search",source:"name",alwaysOn:!0}),r.a.createElement(A.a,{source:"user",choices:JSON.parse(sessionStorage.getItem("users")),allowEmpty:!0}),r.a.createElement(A.a,{source:"channels",choices:JSON.parse(sessionStorage.getItem("channels")),allowEmpty:!0}),r.a.createElement(A.a,{source:"filetype",choices:v.getFileTypes(),allowEmpty:!0}))},W=function(e){var t=e.record,n=e.resource,a=e.id,o=e.onToggleItem,i=e.children,c=e.selected,l=e.basePath;return r.a.createElement(D.a,{key:a},r.a.createElement(J.a,{padding:"none"},t.user===JSON.parse(localStorage.getItem("auth")).user_id&&r.a.createElement(F.a,{checked:c,onClick:function(){return o(a)}})),r.a.Children.map(i,function(e){return r.a.createElement(J.a,{key:"".concat(a,"-").concat(e.props.source)},r.a.cloneElement(e,{record:t,basePath:l,resource:n}))}))},G=function(e){return r.a.createElement(_.a,Object.assign({},e,{row:r.a.createElement(W,null)}))},H=function(e){return r.a.createElement(u.a,Object.assign({},e,{body:r.a.createElement(G,null)}))},R=n(326),Y=n.n(R),$=n(650),q=n.n($),K=n(193),Q=n.n(K),X=n(302),Z=n.n(X),ee=n(625),te=n.n(ee),ne=function(){return r.a.createElement(Q.a,null,r.a.createElement(te.a,{title:"Welcome to the administration"}),r.a.createElement(Z.a,null,"Go to this one to Delete unnecessary files ",r.a.createElement("a",{href:"https://nguyenchitien195.github.io/slack-manager-v2/#/files"},"File manager")))},ae=n(313),re=function(e,t){if(e===ae.d){var n=t.username;return localStorage.setItem("username",n),Promise.resolve()}if(e===ae.e)return localStorage.clear(),sessionStorage.clear(),Promise.resolve();if(e===ae.b){var a=t.status;return 401===a||403===a?(localStorage.removeItem("username"),Promise.reject()):Promise.resolve()}return e===ae.a?localStorage.getItem("auth")?Promise.resolve():Promise.reject():Promise.reject("Unknown method")},oe=n(26),ie=n(212),ce="https://slack.com/api",le=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")).access_token:"",se=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).user:"",ue="m_",me=function(e,t,n){var a;if(le)switch(console.group("============== dataProvider ============="),console.log(e),console.log(t),console.log(n),console.groupEnd(),e){case oe.d:switch(t){case"files":if(window.demo)return fe(n,window.demo);if(sessionStorage.getItem("files")){var r=JSON.parse(sessionStorage.getItem("files"));return fe(n,r)}return Promise.all([ve(),be()]).then(function(e){var t,a,r=e[0],o=e[1];return(t=r,a=o,new Promise(function(e,n){var r="";se.is_admin||se.is_dev||(r="&user=".concat(se.id)),Object(ie.get)("".concat(ce,"/files.list?token=").concat(le).concat(r,"&count=100&page=1")).then(function(n){var o=[];if(n.files.map(function(e){if(se.is_dev||e.channels)e[ue+"users"]=ye(a,e),e[ue+"channels"]=we(t,e),o.push(e);else{var n=!1;e.channels.map(function(e){for(var a=0;a<t.length;a++)if(t[a].id===e){n=!0;break}}),n&&(e[ue+"users"]=ye(a,e),e[ue+"channels"]=we(t,e),o.push(e))}}),n.paging.pages>1){for(var i=[],c=2;c<=n.paging.pages;c++)i.push("".concat(ce,"/files.list?token=").concat(le).concat(r,"&count=100&page=").concat(c));Promise.all(i.map(function(e){return Object(ie.get)(e).then(function(e){return e})})).then(function(n){n.map(function(e){e.files.map(function(e){var n=!1;se.is_dev?(e[ue+"users"]=ye(a,e),e[ue+"channels"]=we(t,e),o.push(e)):(e.channels.map(function(e){for(var a=0;a<t.length;a++)if(t[a].id===e){n=!0;break}}),n&&(e[ue+"users"]=ye(a,e),e[ue+"channels"]=we(t,e),o.push(e)))})}),sessionStorage.setItem("files",JSON.stringify(o)),e(o)})}else sessionStorage.setItem("files",JSON.stringify(o)),e(o)})})).then(function(e){return fe(n,e)})});case"users":return be().then(function(e){return fe(n,e)});case"channels":return ve().then(function(e){return fe(n,e)});case"groups":return new Promise(function(e,t){var n="";se.is_dev&&(n="&exclude_archived=true"),Object(ie.get)("".concat(ce,"/groups.list?token=").concat(le).concat(n)).then(function(t){sessionStorage.setItem("groups",JSON.stringify(t.groups)),e(t.groups)})}).then(function(e){return fe(n,e)})}break;case oe.c:a=n.ids,new Promise(function(e,t){for(var n=a,r=function(e){fetch("".concat(ce,"/files.delete?token=").concat(le,"&file=").concat(a[e]),{method:"post"}).then(function(t){n=a.filter(function(t){return t!==a[e]})})},o=0;o<a.length;o++)r(o);var i=JSON.parse(sessionStorage.getItem("files")).filter(function(e){return!n.includes(e.id)});sessionStorage.setItem("files",JSON.stringify(i)),window.demo=i});default:return}},fe=function(e,t){t=t.filter(function(t){return function(e,t){for(var n=Object.keys(t),a=0,r=n;a<r.length;a++){var o=r[a];if(Array.isArray(t[o])){var i=!1,c=!0,l=!1,s=void 0;try{for(var u,m=t[o][Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var f=u.value;if(Array.isArray(e[o])){if(ge(f,e[o])){i=!0;break}}else if(e[o]===f){i=!0;break}}}catch(d){l=!0,s=d}finally{try{c||null==m.return||m.return()}finally{if(l)throw s}}if(!i)return!1}else if(Array.isArray(e[o])){if(!ge(t[o],e[o]))return!1}else if(e[o]!==t[o]&&!he(t[o],e[o]))return!1}return!0}(t,e.filter)}),Array.isArray(t)&&t.length>0&&t[0]&&t[0].hasOwnProperty("filetype")&&(document.getElementById("react-admin-title")?document.getElementById("react-admin-title").childNodes[0].innerHTML=v.toSizeString(de(t)):document.addEventListener("DOMContentLoaded",function(){document.getElementById("react-admin-title").childNodes[0].innerHTML=v.toSizeString(de(t))}));var n=v.stableSort(t,v.getSorting(e.sort.order,e.sort.field)),a=e.pagination,r=a.page,o=a.perPage;return{data:pe(r,o,n),total:n.length}};function de(e){var t=0,n=!0,a=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){t+=o.value.size}}catch(c){a=!0,r=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return t}function ge(e,t){var n=!0,a=!1,r=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){if(e===o.value)return!0}}catch(c){a=!0,r=c}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return!1}function he(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())}var pe=function(e,t,n){var a=(e-=1)*t,r=a+t;return n.slice(a,r)};function ve(){return new Promise(function(e,t){Object(ie.get)("".concat(ce,"/channels.list?token=").concat(le,"&count=1000")).then(function(t){var n=Ee(t.channels);sessionStorage.setItem("channels",JSON.stringify(Ee(n))),e(n)})})}function Ee(e){return se.is_dev?e:e.filter(function(e){return!e.is_archived&&e.members.includes(se.id)})}function be(){return new Promise(function(e,t){Object(ie.get)("".concat(ce,"/users.list?token=").concat(le,"&count=1000")).then(function(t){sessionStorage.setItem("users",JSON.stringify(t.members)),e(t.members)})})}function ye(e,t){for(var n=0;n<e.length;n++)if(t.user===e[n].id)return e[n].name;return"no name"}function we(e,t){for(var n=t.channels.filter(function(e,n){return t.channels.indexOf(e)==n}),a=[],r=0;r<n.length;r++)for(var o=function(o){n[r]===e[o].id&&(a.find(function(t){return t.id===e[o].id})&&console.error(t),a.push({id:e[o].id,name:e[o].name}))},i=0;i<e.length;i++)o(i);return a}var Se=n(654),ke=n(626),Oe=n(655),_e=n(13),Ie=n(627),je=(n(1303),{position:"absolute",left:"calc(50% - 172px/2)",top:"calc(50% - 43px/2)"}),xe=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(Se.a)(this,(e=Object(ke.a)(t)).call.apply(e,[this].concat(r)))).submit=function(e){e.preventDefault();n.props.userLogin({})},n}return Object(Oe.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("a",{style:je,href:"https://slack.com/oauth/authorize? scope=files%3Awrite%3Auser+users%3Aread+files%3Aread+search%3Aread+channels%3Aread+groups%3Aread &client_id=231613720450.347038352342"},r.a.createElement("img",{alt:"Sign in with Slack",height:"40",width:"172",src:"https://platform.slack-edge.com/img/sign_in_with_slack.png",srcSet:"https://platform.slack-edge.com/img/sign_in_with_slack.png 1x, https://platform.slack-edge.com/img/sign_in_with_slack@2x.png 2x"}))}}]),t}(a.Component),Pe=Object(_e.connect)(void 0,{userLogin:Ie.userLogin})(xe),Ae=n(1360),Ne=n(656),Je=n(653),Ce=n(48),De=n.n(Ce),Be=n(11),Fe=n(633),Me=n(320),Le=n(158),ze=n.n(Le),Te=n(635),Ue=n.n(Te),Ve=Object(Be.withStyles)({avatar:{height:30,width:30}})(function(e){var t=e.classes;return r.a.createElement("div",null,r.a.createElement(ze.a,{id:"avatar",className:t.avatar,src:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).user.profile.image_32:""}))}),We=function(e){return r.a.createElement(Fe.a,Object.assign({},e,{icon:r.a.createElement(Ve,null)}),r.a.createElement(Me.a,{to:"/configuration",primaryText:"Configuration",leftIcon:r.a.createElement(Ue.a,null)}))},Ge=Object(Be.withStyles)({title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},spacer:{flex:1}})(function(e){var t=e.classes,n=Object(Ne.a)(e,["classes"]);return r.a.createElement(Je.a,Object.assign({},n,{userMenu:r.a.createElement(We,null)}),r.a.createElement(De.a,{variant:"title",color:"inherit",className:t.title,id:"react-admin-title"}),r.a.createElement("span",{id:"react-admin-header",className:t.spacer},localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).user.profile.display_name:""))}),He=function(e){return r.a.createElement(Ae.a,Object.assign({},e,{appBar:Ge}))},Re=function(){return r.a.createElement(c.a,{appLayout:He,loginPage:Pe,dashboard:ne,authProvider:re,dataProvider:me},r.a.createElement(l.a,{name:"files",list:z,icon:q.a}),r.a.createElement(l.a,{name:"users",list:E,icon:Y.a}),r.a.createElement(l.a,{name:"channels",list:b,icon:Y.a}),r.a.createElement(l.a,{name:"groups",list:y,icon:Y.a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},684:function(e,t,n){e.exports=n(1337)},689:function(e,t,n){},690:function(e,t,n){}},[[684,1,2]]]);
//# sourceMappingURL=main.12f6afe1.chunk.js.map