(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1301:function(e,t,n){},1335:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(34),c=n.n(o),i=(n(687),n(688),n(1357)),l=n(1356),s=n(1358),u=n(1361),m=n(1347),f=n(1348),d=n(1349),g=function(e){return a.a.createElement(s.a,e,a.a.createElement(u.a,{rowClick:"edit"},a.a.createElement(m.a,{label:"File",source:"profile.image_original",title:"avatar",target:"_blank"}),a.a.createElement(f.a,{source:"id",label:"Id"}),a.a.createElement(d.a,{source:"profile.image_72",label:"Avatar"}),a.a.createElement(f.a,{source:"name",label:"user"}),a.a.createElement(f.a,{source:"profile.display_name",label:"Display name"})))},h=n(1350),p=n(303),v=n(304),E=function(){function e(){Object(p.a)(this,e)}return Object(v.a)(e,null,[{key:"getFileTypes",value:function(){return[{id:"jpg",name:"jpg"},{id:"png",name:"png"},{id:"gif",name:"gif"},{id:"zip",name:"zip"},{id:"text",name:"text"},{id:"doc",name:"doc"},{id:"docx",name:"docx"},{id:"pdf",name:"pdf"},{id:"mp4",name:"mp4"}]}},{key:"convertDate",value:function(e){var t=new Date(1e3*e),n=t.getFullYear(),r=t.getMonth()+1,a=t.getDate();t.getHours(),t.getMinutes(),t.getSeconds();return a+"-"+r+"-"+n}},{key:"toSizeString",value:function(e){return e<Math.pow(2,10)?e+" B":e<Math.pow(2,20)?(e/Math.pow(2,10)).toFixed(0)+" kB":e<Math.pow(2,30)?(e/Math.pow(2,20)).toFixed(2)+" MB":e<Math.pow(2,40)?(e/Math.pow(2,30)).toFixed(2)+" GB":void 0}},{key:"desc",value:function(e,t,n){var r=e[n],a=t[n],o=n.split(".");return 2===o.length&&(r=e[o[0]][o[1]],a=t[o[0]][o[1]]),a<r?-1:a>r?1:0}},{key:"stableSort",value:function(e,t){var n=e.map(function(e,t){return[e,t]});return n.sort(function(e,n){var r=t(e[0],n[0]);return 0!==r?r:e[1]-n[1]}),n.map(function(e){return e[0]})}},{key:"getSorting",value:function(e,t){var n=this;return"DESC"==e?function(e,r){return n.desc(e,r,t)}:function(e,r){return-n.desc(e,r,t)}}}]),e}(),y=function(e){return a.a.createElement(s.a,e,a.a.createElement(u.a,{rowClick:"edit"},a.a.createElement(f.a,{source:"name",label:"Name"}),a.a.createElement(h.a,{source:"created",label:"Created",render:function(e){return E.convertDate(e.created)}})))},w=function(e){return a.a.createElement(s.a,e,a.a.createElement(u.a,{rowClick:"edit"},a.a.createElement(f.a,{source:"name",label:"Name"}),a.a.createElement(h.a,{source:"created",label:"Created",render:function(e){return E.convertDate(e.created)}})))},b=n(104),S=n(1351),k=n(1365),O=n(1360),j=n(652),I=n(1352),_=n(1353),x=n(1354),P=n(1362),N=n(1366),A=n(50),J=n.n(A),C=n(107),M=n.n(C),L=n(120),D=n.n(L),z=function(e){return a.a.createElement(s.a,Object.assign({filters:a.a.createElement(B,null)},e),a.a.createElement(b.a,{small:a.a.createElement(S.a,{primaryText:function(e){return e.title},secondaryText:function(e){return e.m_users},tertiaryText:function(e){return new Date(e.created).toLocaleDateString()}}),medium:a.a.createElement(H,null,a.a.createElement(m.a,{label:"File",source:"url_private",src:"url_private",title:"title",target:"_blank"}),a.a.createElement(f.a,{label:"User",source:"m_users"}),a.a.createElement(I.a,{label:"Channel",source:"m_channels",sortable:!1},a.a.createElement(k.a,null,a.a.createElement(_.a,{source:"name"}))),a.a.createElement(d.a,{label:"Thumbnail",source:"thumb_80",sortable:!1}),a.a.createElement(h.a,{source:"size",render:function(e){return E.toSizeString(e.size)}}),a.a.createElement(x.a,{source:"created",locales:"fr-FR"}))}))},B=function(e){return a.a.createElement(O.a,e,a.a.createElement(P.a,{label:"Search",source:"name",alwaysOn:!0}),a.a.createElement(N.a,{source:"user",choices:JSON.parse(sessionStorage.getItem("users")),allowEmpty:!0}),a.a.createElement(N.a,{source:"channels",choices:JSON.parse(sessionStorage.getItem("channels")),allowEmpty:!0}),a.a.createElement(N.a,{source:"filetype",choices:E.getFileTypes(),allowEmpty:!0}))},T=function(e){var t=e.record,n=e.resource,r=e.id,o=e.onToggleItem,c=e.children,i=e.selected,l=e.basePath;return a.a.createElement(M.a,{key:r},a.a.createElement(J.a,{padding:"none"},t.user===JSON.parse(localStorage.getItem("auth")).user_id&&a.a.createElement(D.a,{checked:i,onClick:function(){return o(r)}})),a.a.Children.map(c,function(e){return a.a.createElement(J.a,{key:"".concat(r,"-").concat(e.props.source)},a.a.cloneElement(e,{record:t,basePath:l,resource:n}))}))},F=function(e){return a.a.createElement(j.a,Object.assign({},e,{row:a.a.createElement(T,null)}))},H=function(e){return a.a.createElement(u.a,Object.assign({},e,{body:a.a.createElement(F,null)}))},W=n(325),U=n.n(W),G=n(649),R=n.n(G),Y=n(193),$=n.n(Y),q=n(299),K=n.n(q),Q=n(624),V=n.n(Q),X=function(){return a.a.createElement($.a,null,a.a.createElement(V.a,{title:"Welcome to the administration"}),a.a.createElement(K.a,null,"Lorem ipsum sic dolor amet..."))},Z=n(312),ee=function(e,t){if(e===Z.d){var n=t.username;return localStorage.setItem("username",n),Promise.resolve()}if(e===Z.e)return localStorage.clear(),sessionStorage.clear(),Promise.resolve();if(e===Z.b){var r=t.status;return 401===r||403===r?(localStorage.removeItem("username"),Promise.reject()):Promise.resolve()}return e===Z.a?localStorage.getItem("auth")?Promise.resolve():Promise.reject():Promise.reject("Unknown method")},te=n(26),ne=n(245),re="https://slack.com/api",ae=localStorage.getItem("auth")?JSON.parse(localStorage.getItem("auth")).access_token:"",oe="m_",ce=function(e,t,n){var r;if(ae)switch(console.group("============== dataProvider ============="),console.log(e),console.log(t),console.log(n),console.groupEnd(),e){case te.d:switch(t){case"files":if(window.demo)return ie(n,window.demo);if(sessionStorage.getItem("files")){var a=JSON.parse(sessionStorage.getItem("files"));return ie(n,a)}return Promise.all([fe(),de()]).then(function(e){var t,r,a=e[0],o=e[1];return(t=a,r=o,new Promise(function(e,n){Object(ne.get)("".concat(re,"/files.list?token=").concat(ae,"&count=1000")).then(function(n){for(var a=n.files,o=[],c=0;c<a.length;c++)o[c]=a[c],o[c].created=1e3*o[c].created,o[c][oe+"users"]=ge(r,a[c]),o[c][oe+"channels"]=he(t,a[c]);sessionStorage.setItem("files",JSON.stringify(o)),e(o)})})).then(function(e){return ie(n,e)})});case"users":return de().then(function(e){return ie(n,e)});case"channels":return fe().then(function(e){return ie(n,e)});case"groups":return new Promise(function(e,t){Object(ne.get)("".concat(re,"/groups.list?token=").concat(ae)).then(function(t){sessionStorage.setItem("groups",JSON.stringify(t.groups)),e(t.groups)})}).then(function(e){return ie(n,e)})}break;case te.c:r=n.ids,new Promise(function(e,t){for(var n=r,a=function(e){fetch("".concat(re,"/files.delete?token=").concat(ae,"&file=").concat(r[e]),{method:"post"}).then(function(t){n=r.filter(function(t){return t!==r[e]})})},o=0;o<r.length;o++)a(o);var c=JSON.parse(sessionStorage.getItem("files")).filter(function(e){return!n.includes(e.id)});sessionStorage.setItem("files",JSON.stringify(c)),window.demo=c});default:return}},ie=function(e,t){t=t.filter(function(t){return function(e,t){for(var n=Object.keys(t),r=0,a=n;r<a.length;r++){var o=a[r];if(Array.isArray(t[o])){var c=!1,i=!0,l=!1,s=void 0;try{for(var u,m=t[o][Symbol.iterator]();!(i=(u=m.next()).done);i=!0){var f=u.value;if(Array.isArray(e[o])){if(se(f,e[o])){c=!0;break}}else if(e[o]===f){c=!0;break}}}catch(d){l=!0,s=d}finally{try{i||null==m.return||m.return()}finally{if(l)throw s}}if(!c)return!1}else if(Array.isArray(e[o])){if(!se(t[o],e[o]))return!1}else if(e[o]!==t[o]&&!ue(t[o],e[o]))return!1}return!0}(t,e.filter)}),Array.isArray(t)&&t.length>0&&t[0].hasOwnProperty("filetype")&&(document.getElementById("react-admin-title")?document.getElementById("react-admin-title").childNodes[0].innerHTML=E.toSizeString(le(t)):document.addEventListener("DOMContentLoaded",function(){document.getElementById("react-admin-title").childNodes[0].innerHTML=E.toSizeString(le(t))}));var n=E.stableSort(t,E.getSorting(e.sort.order,e.sort.field)),r=e.pagination,a=r.page,o=r.perPage;return{data:me(a,o,n),total:n.length}};function le(e){var t=0,n=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){t+=o.value.size}}catch(i){r=!0,a=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return t}function se(e,t){var n=!0,r=!1,a=void 0;try{for(var o,c=t[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){if(e===o.value)return!0}}catch(i){r=!0,a=i}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return!1}function ue(e,t){return-1!==t.toLowerCase().indexOf(e.toLowerCase())}var me=function(e,t,n){var r=(e-=1)*t,a=r+t;return n.slice(r,a)};function fe(){return new Promise(function(e,t){Object(ne.get)("".concat(re,"/channels.list?token=").concat(ae,"&count=1000")).then(function(t){sessionStorage.setItem("channels",JSON.stringify(t.channels)),e(t.channels)})})}function de(){return new Promise(function(e,t){Object(ne.get)("".concat(re,"/users.list?token=").concat(ae,"&count=1000")).then(function(t){sessionStorage.setItem("users",JSON.stringify(t.members)),e(t.members)})})}function ge(e,t){for(var n="no name",r=0;r<e.length;r++)if(t.user===e[r].id){n=e[r].name;break}return n}function he(e,t){for(var n=t.channels.filter(function(e,n){return t.channels.indexOf(e)==n}),r=[],a=0;a<n.length;a++)for(var o=function(o){n[a]===e[o].id&&(r.find(function(t){return t.id===e[o].id})&&console.error(t),r.push({id:e[o].id,name:e[o].name}))},c=0;c<e.length;c++)o(c);return r}var pe=n(651),ve=n(625),Ee=n(653),ye=n(13),we=n(626),be=(n(1301),{position:"absolute",left:"calc(50% - 172px/2)",top:"calc(50% - 43px/2)"}),Se=function(e){function t(){var e,n;Object(p.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(pe.a)(this,(e=Object(ve.a)(t)).call.apply(e,[this].concat(a)))).submit=function(e){e.preventDefault();n.props.userLogin({})},n}return Object(Ee.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return a.a.createElement("a",{style:be,href:"https://slack.com/oauth/authorize? scope=files%3Awrite%3Auser+users%3Aread+files%3Aread+search%3Aread+channels%3Aread+groups%3Aread &client_id=231613720450.347038352342"},a.a.createElement("img",{alt:"Sign in with Slack",height:"40",width:"172",src:"https://platform.slack-edge.com/img/sign_in_with_slack.png",srcSet:"https://platform.slack-edge.com/img/sign_in_with_slack.png 1x, https://platform.slack-edge.com/img/sign_in_with_slack@2x.png 2x"}))}}]),t}(r.Component),ke=Object(ye.connect)(void 0,{userLogin:we.userLogin})(Se),Oe=n(1359),je=n(654),Ie=n(650),_e=n(47),xe=n.n(_e),Pe=n(11),Ne=n(632),Ae=n(319),Je=n(158),Ce=n.n(Je),Me=n(634),Le=n.n(Me),De=Object(Pe.withStyles)({avatar:{height:30,width:30}})(function(e){var t=e.classes;return a.a.createElement("div",null,a.a.createElement(Ce.a,{id:"avatar",className:t.avatar,src:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).user.profile.image_32:""}))}),ze=function(e){return a.a.createElement(Ne.a,Object.assign({},e,{icon:a.a.createElement(De,null)}),a.a.createElement(Ae.a,{to:"/configuration",primaryText:"Configuration",leftIcon:a.a.createElement(Le.a,null)}))},Be=Object(Pe.withStyles)({title:{flex:1,textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},spacer:{flex:1}})(function(e){var t=e.classes,n=Object(je.a)(e,["classes"]);return a.a.createElement(Ie.a,Object.assign({},n,{userMenu:a.a.createElement(ze,null)}),a.a.createElement(xe.a,{variant:"title",color:"inherit",className:t.title,id:"react-admin-title"}),a.a.createElement("span",{id:"react-admin-header",className:t.spacer},localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).user.profile.display_name:""))}),Te=function(e){return a.a.createElement(Oe.a,Object.assign({},e,{appBar:Be}))},Fe=function(){return a.a.createElement(i.a,{appLayout:Te,loginPage:ke,dashboard:X,authProvider:ee,dataProvider:ce},a.a.createElement(l.a,{name:"files",list:z,icon:R.a}),a.a.createElement(l.a,{name:"users",list:g,icon:U.a}),a.a.createElement(l.a,{name:"channels",list:y,icon:U.a}),a.a.createElement(l.a,{name:"groups",list:w,icon:U.a}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(Fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},682:function(e,t,n){e.exports=n(1335)},687:function(e,t,n){},688:function(e,t,n){}},[[682,1,2]]]);
//# sourceMappingURL=main.e76e5539.chunk.js.map